<!DOCTYPE html>
<html>

<script type="text/javascript"
	src="../bower_components/angular/angular.min.js"></script>
<script type="text/javascript"
	src="../bower_components/angular-google-maps/dist/angular-google-maps.min.js"></script>
<script type="text/javascript"
	src="../bower_components/angularjs-socialshare/dist/angular-socialshare.min.js"></script>



<head>
<meta charset="ISO-8859-1">

<link rel="stylesheet" type="text/css"
	href="CountriesOfTheWorldStyle.css">
<link rel="stylesheet" type="text/css" href="socialMedia.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!--link rel="stylesheet" type="text/css"
	href="http://720kb.github.io/csshelper/assets/ext/src/helper.css" -->
<title>Countries of the world</title>
</head>
<body data-ng-app="myApp" data-ng-controller="myCtrl">

	<header>
		<h1>Countries of the world</h1>
	</header>

	<nav data-ng-show="!showListView">
		<button class="left-arrow" data-ng-click="showList()">back to
			overview</button>
		<h2>{{countrySelected.name}}</h2>
	</nav>

	<section data-ng-show="showListView">
		<p>
			Search for Name: <input type="search" data-ng-model="searchString">
		</p>
		<table>
			<thead>
				<tr>
					<th></th>
					<th class="headerSortDown" data-ng-click="orderByContent('name')">Name</th>
					<th class="headerSortDown"
						data-ng-click="orderByContent('population')">Population</th>
				</tr>
			</thead>

			<tr
				data-ng-repeat="country in data | orderBy:contentToOrder:isSecond | filter:{'name':searchString}"
				data-ng-click="showDetails(country)">
				<td>{{country.flag}} <!--  	<object id="flagObject" data="{{country.flag}}" type="image/svg"> -->
					<!---Fallback---> <!--			Ihr Browser kann leider kein svg darstellen!
					</object> -->
				</td>

				<td>{{ country.name }}</td>
				<td>{{ country.population }}</td>
			</tr>
		</table>

	</section>

	<section data-ng-show="!showListView">

		<!-- ui-gmap-google-map center="map.center" zoom="map.zoom"></ui-gmap-google-map  -->
		<aside data-ng-show="!showListView">
			<!--  {{countrySelected.flag}} -->
			<object id="flagObject" data="{{countrySelected.flag}}"
				type="image/svg">
				<!---Fallback--->
				Ihr Browser kann leider kein svg darstellen!
			</object>
		</aside>

		<table>
			<tr data-ng-repeat="(key, data) in countrySelected">
				<td>{{key}}</td>
				<td>{{data}}</td>
			</tr>
		</table>
		Share country: <a socialshare="" socialshare-provider="twitter"
			socialshare-text="Look at this Country:"
			socialshare-url="#"> <i class="fa fa-twitter"></i>
		</a> <a socialshare="" socialshare-provider="facebook"
			socialshare-url="#"> <i class="fa fa-facebook"></i>
		</a> <a socialshare="" socialshare-provider="google"
			socialshare-url="#"> <i
			class="fa fa-google-plus"></i>
		</a>

	</section>


	<section data-ng-show="!showListView">
		<p>Noticed any mistakes? Please contact us:</p>
		<form>
			Name: <input type="text"> <br> E-Mail: <input
				type="email"> <br>
			<textarea rows="10" cols="50">Enter your message here.</textarea>
			<!--  button>send</button-->
		</form>
	</section>


	<footer>
		<hr></hr>
		<p>Posted by: Jessica Ertel</p>
		<!--  p>
			Contact information: <a href="mailto:someone@example.com">
				someone@example.com</a>.
		</p>-->
		<p>
			Content from: <a href="http://restcountries.eu"> restcountries.eu</a>.
		</p>
		<hr></hr>
	</footer>

	<script>
		var app = angular.module('myApp', ['720kb.socialshare']);
		var lastClick;
		var isSecond = false;
		app.controller('myCtrl', function($scope, $http) {
			$scope.showListView = "true";
			$http.get("https://restcountries.eu/rest/v2/all").then(
					function(response) {
						$scope.data = response.data;
					});
			$scope.orderByContent = function(x) {
				if (lastClick == x) {
					isSecond = true;
					lastClick = ' '
				} else {
					$scope.contentToOrder = x;
				}

			};
			$scope.showDetails = function(x) {
				$scope.showListView = !$scope.showListView;
				//$scope.countrySelected = x;
				$scope.countrySelected = (({ name,flag,region,capital,population,currencies,timezones}) => ({ name,flag,region,capital,population,currencies,timezones }))(x);
			};
			$scope.showList = function() {
				$scope.showListView = !$scope.showListView;
			};
			
			// $scope.map = { center: { latitude: 45, longitude: -73 }, zoom: 8 };
		});
	</script>

</body>
</html>